{
  "name": "clean-code-java",
  "image": "mcr.microsoft.com/devcontainers/java:1-21",

  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  "customizations": {
    "vscode": {
      "extensions": [
        // Java 開發主包（裡面已經含語言、debug、Maven、test 等）
        "vscjava.vscode-java-pack",

        // Optional：格式、規範、拼字檢查類
        "editorconfig.editorconfig",
        "sonarsource.sonarlint-vscode",
        "streetsidesoftware.code-spell-checker"
      ],
      "settings": {
        // 一些對「寫乾淨程式碼」有幫助的預設習慣
        "editor.formatOnSave": true,
        "editor.tabSize": 4,
        "editor.insertSpaces": true,
        "files.trimTrailingWhitespace": true,
        "files.insertFinalNewline": true,

        // Java 相關建議設定
        "java.configuration.checkProjectSettingsExclusions": false,
        "java.configuration.updateBuildConfiguration": "interactive",
        "java.compile.nullAnalysis.mode": "automatic",
        "java.format.settings.profile": "GoogleStyle",

        // 測試結果在測試面板顯示
        "java.test.report.showAfterExecution": "onFailure",

        // 啟用預設的 Code Lens（方便看 references / test）
        "java.referencesCodeLens.enabled": true,
        "java.test.codeLens.enabled": true
      }
    }
  },

  // Codespaces 裡預設使用的 user，官方 image 通常是 vscode
  "remoteUser": "vscode"
}
